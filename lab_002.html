<!DOCTYPE html>
<html>
<head>
	<title>lab1-1</title>
	<script type="text/javascript" src="libs/three.js"></script>
	<style type="text/css">
		body{
			margin: 0;
			overflow: hidden; /*设置溢出元素的处理方式*/
		}
	</style>
</head>
<body>
	<div id="WebGL-draw">  
		
	</div>
	<script type="text/javascript">
		var scene, camera, renderer, planeGeometry;
		function init() {
			/*创建场景、摄像机、渲染器*/
			scene = new THREE.Scene();
			camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000);//设置相机的视椎体
			/*设置摄像机参数*/
			camera.position.x = -20;
			camera.position.y = 15;
			camera.position.z = 45;   //调整位置
			camera.lookAt(scene.position); //使相机始终朝向场景
			scene.add(camera);
			
			//创建一个WebGLDeferredRenderer渲染器
			renderer = new THREE.WebGLRenderer({antialias: true, alpha: true});
        	renderer.setClearColor(new THREE.Color(0xb9b0fe, 1.0));
        	renderer.setSize(window.innerWidth, window.innerHeight);
			
			//导入平台模型
			var mesh1, mesh2, mesh3;
			var loader = new THREE.JSONLoader();
			loader.load("libs/assets/t2.js", function(geometry, mat){
				mesh1 = new THREE.Mesh(geometry, mat[0]);
				mesh1.rotation.set(-Math.PI / 2, 0, Math.PI / 12);
				scene.add(mesh1);
			}, "libs/assets");
			//导入柱子模型
			loader.load("libs/assets/zs.js", function(geometry, mat){
				mesh2 = new THREE.Mesh(geometry, mat[0]);
				mesh2.rotation.set(-Math.PI / 2, 0, Math.PI / 12);
				scene.add(mesh2);
				//复制出另一个对象
				var cloned = mesh2.geometry.clone()；
				mesh3 = new THREE.Mesh(cloned, mat[0]);
				mesh3.rotation.set(-Math.PI / 2, 0, Math.PI / 12);
				mesh3.tranlateX(100);
				scene.add(mesh3);
			}, "libs/assets");

        	//创建聚光灯
			var spotLight = new THREE.SpotLight(0xffffff);
        	spotLight.position.set(30,60,0);
        	spotLight.intensity = 2;
        	scene.add(spotLight);
        	//增加环境光
        	var ambientLight = new THREE.AmbientLight("#1c1c1c");
        	scene.add(ambientLight);

			document.getElementById('WebGL-draw').appendChild(renderer.domElement); 
			//将渲染器画布添加到DOM树中
			/*开始渲染*/
			renderScene();
			function renderScene(){
				requestAnimationFrame(renderScene); //循环重绘
				renderer.render(scene, camera);
			}
		}
		function onResize(){
			camera.aspect = window.innerWidth / window.innerHeight; //设置相机实际窗口的纵横比
			camera.updateProjectionMatrix();
			renderer.setSize(window.innerWidth, window.innerHeight);
		}
		
		window.onload = init /*设置页面加载*/
		window.addEventListener('resize', onResize, false);
	</script>
</body>
</html>